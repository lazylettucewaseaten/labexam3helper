ðŸ”¹ Core Functions in Lex/Flex
1. yylex()

The main scanner function generated by Lex/Flex.

Every time you call yylex(), it reads input from yyin and applies rules until input ends (or a return).

2. yywrap()

Called by yylex() when the end of input is reached.

Default behavior: return 1 â†’ signals end of scanning.

If you override it to return 0, you can continue scanning (e.g., switch to another file).

int yywrap() { return 1; }   // Standard

3. yyrestart(FILE *fp)

Flex function (not standard Lex).

Resets the scanner to start reading from a new input stream.

Example:

yyrestart(fopen("file2.txt", "r"));

4. yylex_destroy()

Cleans up memory used by the scanner (important if your program runs multiple scanners).

5. input() / unput(c)

input() â†’ get the next character from the input stream.

unput(c) â†’ push a character back into the input stream so it will be read again.

char c = input();
if (c == '#') unput(c);   // Put it back

6. yyless(n)

Keep only the first n characters of the current token, and push the rest back into input.

[0-9]+      { yyless(yyleng-1); printf("Number: %s\n", yytext); }


(This matches a number but leaves the last digit for the next rule.)

7. yyterminate()

Ends scanning immediately (usually equivalent to return 0;).

ðŸ”¹ Important Global Variables
1. yyin

Input stream (default stdin).

Change it to scan files:

yyin = fopen("data.txt", "r");

2. yyout

Output stream (default stdout).

Lex actions that use ECHO; print to yyout.

3. yytext

The text of the current token just matched.

4. yyleng

The length of yytext.

5. yylval

If youâ€™re using Lex with Yacc/Bison, yylval holds the semantic value of the token.

ðŸ”¹ State Handling
1. BEGIN(state)

Switches scanner to a different start condition (lexer "mode").

Example:

\"\"\"     { BEGIN(STRING); }
<STRING>\"\"\"   { BEGIN(INITIAL); }

2. YY_START

Holds the current state number.

ðŸ”¹ File Position Control
1. rewind(yyin)

C library function, resets file pointer to start of input file.

2. fseek(yyin, pos, SEEK_SET)

General C function to move file pointer anywhere (not just start).





7. Multiple Input Handling

Sometimes you want to scan from strings, not files:

yy_scan_string(const char *str)

yy_scan_bytes(const char *bytes, int len)

âœ… Example:

yy_scan_string("2+2*3");
yylex();   // scan directly from string





5. Line/Position Tracking

You need this during analysis for error reporting.

yylineno (if %option yylineno is enabled) â†’ current line number.

manual counters:

\n   { yylineno++; }
.    { ; } // do nothing

6. Special Macros

yywrap() â†’ called when EOF is reached (decide stop or continue).

ECHO â†’ print token (rarely used in compilers but useful in testing).
